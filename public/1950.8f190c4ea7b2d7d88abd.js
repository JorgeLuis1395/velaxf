"use strict";(self.webpackChunk_fuse_starter=self.webpackChunk_fuse_starter||[]).push([[1950],{1950:(ot,h,r)=>{r.r(h),r.d(h,{InstrumentsModule:()=>it});var u=r(8583),a=r(3423),g=r(1769),d=r(5593),v=r(1795),S=r(7489),I=r(9529),Z=r(369),T=r(2453),L=r(1512),m=r(3679),p=r(8295),x=r(9983),A=r(1095),_=r(6627),f=r(4885),N=r(3425),b=r(1740),J=r(2210),Y=r(2091),O=r(7441),C=r(7001),t=r(7716);let Q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-instruments"]],decls:1,vars:0,template:function(n,i){1&n&&t._UZ(0,"router-outlet")},directives:[a.lC],encapsulation:2}),e})();var l=r(805),q=r(2340),R=r(1841);let y=(()=>{class e{constructor(n){this._httpClient=n,this._URL="http://localhost:3000/instruments",this._URL_HOST=q.N.url,this._instruments=[]}get instrument(){return this._instruments}set instrument(n){this._instruments=n}getAllInstruments(){this._httpClient.get(`${this._URL_HOST}/instruments`).subscribe(n=>{this._instruments=n.instruments})}addInstrument(n){return this._httpClient.post(`${this._URL_HOST}/instruments`,n)}getInstrumentId(n){return this._httpClient.get(`${this._URL_HOST}/instruments/${n}`)}updateInstrument(n,i){return this._httpClient.patch(`${this._URL_HOST}/instruments/${n}`,i)}deleteInstrument(n){return this._httpClient.delete(`${this._URL_HOST}/instruments/${n}`)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(R.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function M(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"span",11),t._UZ(2,"i",12),t.TgZ(3,"input",13),t.NdJ("input",function(o){return t.CHM(n),t.oxw(),t.MAs(9).filterGlobal(o.target.value,"contains")}),t.qZA(),t.qZA(),t.qZA()}}function P(e,s){if(1&e&&(t.TgZ(0,"th",15),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const n=s.$implicit;t.Q6J("id",n),t.xp6(1),t.Oqu(t.lcZ(2,2,n))}}function H(e,s){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,P,3,4,"th",14),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.headersTable)}}function $(e,s){1&e&&t._UZ(0,"tr")}const j=function(e){return["/instrument/edit-instrument",e]};function w(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"button",17),t.TgZ(7,"button",18),t.NdJ("click",function(o){t.CHM(n);const c=t.oxw().$implicit;return t.oxw().confirm(o,c.id)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.description),t.xp6(2),t.Q6J("routerLink",t.VKq(3,j,n.id))}}function z(e,s){if(1&e&&(t.YNc(0,$,1,0,"tr",16),t.YNc(1,w,8,5,"tr",16)),2&e){const n=t.oxw();t.Q6J("ngIf",0===n.instrumentsAll.length),t.xp6(1),t.Q6J("ngIf",n.instrumentsAll.length>0)}}const B=function(){return["/instrument/add-instrument"]},E=function(){return["name","description"]},G=function(){return[10,20,40]};let D=(()=>{class e{constructor(n,i,o){this.instrumentsService=n,this.confirmationService=i,this.messageService=o,this.headersTable=["nombre","descripcion","acciones"]}get instrumentsAll(){return this.instrumentsService.instrument}ngOnInit(){this.instrumentsService.getAllInstruments()}confirm(n,i){console.log(n,i),this.confirmationService.confirm({target:n.target,message:"Estas seguro de eliminar el registro de manera permanente?",icon:"pi pi-exclamation-triangle",acceptLabel:"Si, Estoy seguro.",rejectLabel:"No",accept:()=>{this.instrumentsService.deleteInstrument(i).subscribe(()=>{this.instrumentsService.instrument=this.instrumentsService.instrument.filter(o=>o.id!==i),this.messageService.add({severity:"success",summary:"\xc9xito!",detail:"El registro se ha eliminado de manera correcta"})},()=>{this.messageService.add({severity:"error",summary:"Algo salio mal!",detail:"No se pudo eliminar el registro. Intentalo m\xe1s tarde"})})}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(y),t.Y36(l.YP),t.Y36(l.ez))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-instruments"]],features:[t._Bn([l.YP,l.ez])],decls:15,vars:11,consts:[[1,"p-5","w-screen"],[1,"flex","justify-between","mb-2"],[1,"text-3xl","font-bold"],["label","Agregar","icon","pi pi-plus","styleClass","p-button-sm p-button-rounded bg-companySecondary border-white w-50",3,"routerLink"],[1,"w-full","pt-3"],["responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} al {last} de {totalRecords} registros","scrollHeight","450px",3,"scrollable","value","paginator","globalFilterFields","rows","showCurrentPageReport","rowsPerPageOptions"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar",3,"input"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-outlined","mr-2",3,"routerLink"],["pButton","","pRipple","","type","button","icon","pi pi-trash",1,"p-button-rounded","p-button-outlined","p-button-danger",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div"),t.TgZ(2,"div",1),t.TgZ(3,"h1",2),t._uU(4,"Administraci\xf3n de Instrumentos"),t.qZA(),t._UZ(5,"p-button",3),t.qZA(),t._UZ(6,"mat-divider"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"p-table",5,6),t.YNc(10,M,4,0,"ng-template",7),t.YNc(11,H,2,1,"ng-template",8),t.YNc(12,z,2,2,"ng-template",9),t.qZA(),t._UZ(13,"p-toast"),t._UZ(14,"p-confirmPopup"),t.qZA(),t.qZA()),2&n&&(t.xp6(5),t.Q6J("routerLink",t.DdM(8,B)),t.xp6(3),t.Q6J("scrollable",0!==i.instrumentsAll.length)("value",0===i.instrumentsAll.length?i.headersTable.concat(i.headersTable):i.instrumentsAll)("paginator",!0)("globalFilterFields",t.DdM(9,E))("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(10,G)))},directives:[d.zx,a.rH,g.d,I.iA,l.jx,T.FN,Z.P,b.o,u.sg,u.O5,d.Hq,v.H],pipes:[u.rS],styles:[""]}),e})();var X=r(3190);const k=["instrumentInNgForm"];function K(e,s){1&e&&(t.TgZ(0,"div",3),t.TgZ(1,"div",4),t._UZ(2,"mat-spinner",5),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("diameter",50)("mode","indeterminate"))}function V(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Por favor ingrese un nombre "),t.qZA())}function W(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Por favor ingrese una descripcion "),t.qZA())}function tt(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1," Guardar "),t.qZA())}function nt(e,s){1&e&&t._UZ(0,"mat-progress-spinner",5),2&e&&t.Q6J("diameter",24)("mode","indeterminate")}const et=function(){return["/instrument"]};function rt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",6),t.TgZ(2,"h1",7),t._uU(3),t.qZA(),t._UZ(4,"p-button",8),t.qZA(),t._UZ(5,"mat-divider"),t.TgZ(6,"form",9,10),t.TgZ(8,"mat-form-field"),t.TgZ(9,"mat-label"),t._uU(10,"Nombre"),t.qZA(),t.TgZ(11,"mat-icon",11),t._uU(12,"app_registration"),t.qZA(),t._UZ(13,"input",12),t.YNc(14,V,2,0,"mat-error",2),t.qZA(),t.TgZ(15,"mat-form-field"),t.TgZ(16,"mat-label"),t._uU(17,"Descripcion"),t.qZA(),t.TgZ(18,"mat-icon",11),t._uU(19,"edit_square"),t.qZA(),t._UZ(20,"input",13),t.YNc(21,W,2,0,"mat-error",2),t.qZA(),t._UZ(22,"div"),t.TgZ(23,"button",14),t.NdJ("click",function(){return t.CHM(n),t.oxw().addInstrument()}),t.YNc(24,tt,2,0,"span",2),t.YNc(25,nt,1,2,"mat-progress-spinner",15),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.xp6(3),t.hij(" ",n.instrumentId?"Editar":"Agregar"," Instrumentos "),t.xp6(1),t.Q6J("routerLink",t.DdM(11,et)),t.xp6(2),t.Q6J("formGroup",n.instrumentForm),t.xp6(7),t.Q6J("formControlName","name"),t.xp6(1),t.Q6J("ngIf",n.instrumentForm.get("name").hasError("required")),t.xp6(6),t.Q6J("formControlName","description"),t.xp6(1),t.Q6J("ngIf",n.instrumentForm.get("description").hasError("required")),t.xp6(2),t.Q6J("color","primary")("disabled",n.instrumentForm.disabled),t.xp6(1),t.Q6J("ngIf",!n.instrumentForm.disabled),t.xp6(1),t.Q6J("ngIf",n.instrumentForm.disabled)}}let F=(()=>{class e{constructor(n,i,o,c,U){this._formBuilder=n,this.instrumentService=i,this.router=o,this.activatedRoute=c,this.snackBar=U,this.instrumentId=0,this.loading=!0}ngOnInit(){if(!this.router.url.includes("edit-instrument"))return this.loading=!1,void(this.instrumentForm=this._formBuilder.group({name:["",[m.kI.required]],description:["",[m.kI.required]]}));this.activatedRoute.params.pipe((0,X.w)(({id:n})=>this.instrumentService.getInstrumentId(n))).subscribe(n=>{console.log("Instrumento",n.instrument),this.instrumentForm=this._formBuilder.group({name:[n.instrument.name,[m.kI.required]],description:[n.instrument.description,[m.kI.required]]}),this.instrumentId=n.instrument.id,this.loading=!1})}addInstrument(){this.instrumentForm.invalid||(this.instrumentForm.disable(),0===this.instrumentId?this.instrumentService.addInstrument(this.instrumentForm.value).subscribe(n=>{this.router.navigate(["/instrument"]),this.mostrarSnakbar("Registro creado")}):this.instrumentService.updateInstrument(this.instrumentId,this.instrumentForm.value).subscribe(n=>{this.router.navigate(["/instrument"]),this.mostrarSnakbar("Registro actualizado")}))}mostrarSnakbar(n){this.snackBar.open(n,"ok!",{duration:2500})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.qu),t.Y36(y),t.Y36(a.F0),t.Y36(a.gz),t.Y36(C.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-instruments"]],viewQuery:function(n,i){if(1&n&&t.Gf(k,5),2&n){let o;t.iGM(o=t.CRH())&&(i.instrumentInNgForm=o.first)}},decls:3,vars:2,consts:[[1,"p-5","w-screen"],["class","grid justify-items-stretch",4,"ngIf"],[4,"ngIf"],[1,"grid","justify-items-stretch"],[1,"justify-self-center","pt-50"],[3,"diameter","mode"],[1,"flex","justify-between","mb-2"],[1,"text-3xl","font-bold"],["label","Regresar","icon","pi pi-angle-left","styleClass","p-button-sm p-button-rounded bg-companySecondary border-white w-50",3,"routerLink"],[1,"grid","gap-4","md:grid-cols-3","sm:grid-cols-2","m-10",3,"formGroup"],["instrumentInNgForm","ngForm"],["matPrefix",""],["type","text","matInput","",1,"bg-white",3,"formControlName"],["type","text","matInput","",3,"formControlName"],["mat-flat-button","",1,"fuse-mat-button-medium","mt-6","w-1/2",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,K,3,2,"div",1),t.YNc(2,rt,26,12,"div",2),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[u.O5,f.$g,d.zx,a.rH,g.d,m._Y,m.JL,m.sg,p.KE,p.hX,_.Hw,p.qo,x.Nt,m.Fj,m.JJ,m.u,A.lW,p.TO,f.Ou],styles:[".prueba[_ngcontent-%COMP%]{background:red}.form1[_ngcontent-%COMP%]{background:blue;width:100%}"]}),e})();const st=[{path:"",component:Q,children:[{path:"",component:D},{path:"add-instrument",component:F},{path:"edit-instrument/:id",component:F}]}];let it=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.Bz.forChild(st),u.ez,g.t,d.hJ,v.T,S.m,I.U$,u.ez,Z.n,T.EV,L.S,m.UX,p.lN,x.c,A.ot,f.Cq,N.gz,b.j,_.Ps,J.kW,Y.p0,O.LD,C.ZX]]}),e})()}}]);